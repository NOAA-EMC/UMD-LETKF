---
mpi:
  ens_size: 50
  ppn: 1


solver:
  inflation: {}


observation:
  class: obsio_test

  synthetic_obs:
  - [obs1, plat1, state1, 40.5, 220.5, 1.0,  0.0,  5.0, 1.0]
  - [obs2, plat1, state2, 1.5,  220.5, 1.0, 10.0, -5.0, 1.0]


state:
  class: stateio_nc

  hzgrid:
  - name: hz1
    lat1d: [lat, bkg/bkg.0001.nc]
    lon1d: [lon, bkg/bkg.0001.nc]

  vtgrid:
  - name: vt1
    vert1d: [depth, bkg/bkg.0001.nc]

  statedef:
  - name: state1
    hzgrid: hz1
    vtgrid: vt1
    ana_bounds: [-2, 2]
    input:  [var1, "bkg/bkg.#ENS4#.nc"]
    output: [var1, "#TYPE#.#ENS4#.nc"]

  - name: state2
    hzgrid: hz1
    vtgrid: vt1
    ana_inc_max: 2
    input:  [var2, "bkg/bkg.#ENS4#.nc"]
    output: [var2, "#TYPE#.#ENS4#.nc"]

  - name: state3
    hzgrid: hz1
    vtgrid: vt1
    ana_inc_max: 0.2
    ana_bounds: [-2, 2]
    input:  [var3, "bkg/bkg.#ENS4#.nc"]
    output: [var3, "#TYPE#.#ENS4#.nc"]

localization:
  class: loc_novrt
